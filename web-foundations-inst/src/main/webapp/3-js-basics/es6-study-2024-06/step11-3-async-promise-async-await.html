<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
      <!--
      자바스크립트 세가지 비동기 방식
      1. callback     이전부터 사용          함수 안에 또 다른 함수를 매개변수로 넘겨서 실행순서를 제어 
      2. promise      ECMA 2015 부터 도입    Promise 객체와 콜백 함수를 사용해서 실행 순서를 제어
      3. async,await  ECMA 2017 부터 도입    async 함수와 await 예약어를 사용해서 실행순서를 제어
      방식	특징	단점
      Callback	간단한 작업에는 적합	콜백 지옥 발생 가능
      Promise	then() 체이닝으로 가독성 개선	코드가 여전히 길어질 수 있음
      Async/Await	동기 코드처럼 읽히고 가독성 최고	await을 사용하지 않으면 동작하지 않음
  -->
    <script>
      //async/await를 사용
      async function fetchData() {
        try {
          console.log("1. 시작");
          /*
      🎯 fetch()의 반환 타입과 변수 선언 방식
          await fetch(url)을 사용하면 Promise가 해제(resolved)된 값만 변수에 저장됩니다.
          ➡️ await를 사용하면 fetch()가 반환한 Promise<Response>를 기다린 후, response 변수에 해제된 Response 객체가 저장됩니다.
          ➡️ 즉, Promise<Response>가 아니라 **그 내부 값(Response 객체)**가 저장됩니다.
      */
          const response = await fetch(
            "https://jsonplaceholder.typicode.com/todos/1"
          );
          console.log("2. 📦 응답을 받았습니다!", response);
          const data = await response.json();
          console.log("3. 📖 데이터를 변환했습니다!", data);
        } catch (error) {
          console.error("2. ❌ 요청 실패!", error);
        }       
      }
      fetchData();
      console.log("4. 끝");
    </script>
  </body>
</html>
